/**
 * Plumbing Fixture Database
 * 
 * WSFU/DFU values from ASPE Plumbing Engineering Design Handbook Table 5-18
 * Hot water demand (GPH) from ASHRAE Service Water Heating methods
 * 
 * Reference: ASPE Plumbing Engineering Design Handbookâ€”Volume 2
 */

export interface FixtureDefinition {
  id: string              // Unique identifier
  name: string            // Display name
  category: string        // Category for grouping
  occupancy: 'private' | 'public'  // Private or public use
  supplyControl: string   // Type of supply control
  wsfuCold: number        // Cold water WSFU
  wsfuHot: number         // Hot water WSFU
  wsfuTotal: number       // Total WSFU
  dfu: number             // Drainage Fixture Units
  hotWaterGPH: number     // Hot water demand (GPH) - ASHRAE
  trapSize?: string       // Minimum trap size
  icon: string            // Emoji for display
}

// Categories for organization
export const FIXTURE_CATEGORIES = [
  'Toilets & Urinals',
  'Sinks & Lavatories',
  'Bathing',
  'Appliances',
  'Drains',
  'Specialty',
  'Medical',
  'Commercial Kitchen',
] as const

export type FixtureCategory = typeof FIXTURE_CATEGORIES[number]

/**
 * ASPE Plumbing Fixture Database
 * WSFU values from ASPE Table 5-18 "Load Values Assigned to Fixtures"
 * DFU values from standard drainage tables
 * Hot water GPH from ASHRAE Service Water Heating
 */
export const NYC_FIXTURE_DATABASE: FixtureDefinition[] = [
  // ============================================
  // TOILETS & URINALS (ASPE Table 5-18)
  // ============================================
  {
    id: 'water_closet_tank_private',
    name: 'Water Closet (Private, Tank)',
    category: 'Toilets & Urinals',
    occupancy: 'private',
    supplyControl: 'Flush tank',
    wsfuCold: 2.2,
    wsfuHot: 0,
    wsfuTotal: 2.2,
    dfu: 4,
    hotWaterGPH: 0,
    trapSize: '3"',
    icon: 'ðŸš½',
  },
  {
    id: 'water_closet_valve_private',
    name: 'Water Closet (Private, Flush Valve)',
    category: 'Toilets & Urinals',
    occupancy: 'private',
    supplyControl: 'Flush valve',
    wsfuCold: 6.0,
    wsfuHot: 0,
    wsfuTotal: 6.0,
    dfu: 4,
    hotWaterGPH: 0,
    trapSize: '3"',
    icon: 'ðŸš½',
  },
  {
    id: 'water_closet_valve_public',
    name: 'Water Closet (Public, Flush Valve)',
    category: 'Toilets & Urinals',
    occupancy: 'public',
    supplyControl: 'Flush valve',
    wsfuCold: 10.0,
    wsfuHot: 0,
    wsfuTotal: 10.0,
    dfu: 4,
    hotWaterGPH: 0,
    trapSize: '3"',
    icon: 'ðŸš½',
  },
  {
    id: 'water_closet_tank_public',
    name: 'Water Closet (Public, Tank)',
    category: 'Toilets & Urinals',
    occupancy: 'public',
    supplyControl: 'Flush tank',
    wsfuCold: 5.0,
    wsfuHot: 0,
    wsfuTotal: 5.0,
    dfu: 4,
    hotWaterGPH: 0,
    trapSize: '3"',
    icon: 'ðŸš½',
  },
  {
    id: 'water_closet_flushometer',
    name: 'Water Closet (Flushometer Tank)',
    category: 'Toilets & Urinals',
    occupancy: 'public',
    supplyControl: 'Flushometer tank',
    wsfuCold: 2.0,
    wsfuHot: 0,
    wsfuTotal: 2.0,
    dfu: 4,
    hotWaterGPH: 0,
    trapSize: '3"',
    icon: 'ðŸš½',
  },
  {
    id: 'urinal_1in_valve',
    name: 'Urinal (1" Flush Valve)',
    category: 'Toilets & Urinals',
    occupancy: 'public',
    supplyControl: '1" flush valve',
    wsfuCold: 10.0,
    wsfuHot: 0,
    wsfuTotal: 10.0,
    dfu: 4,
    hotWaterGPH: 0,
    trapSize: '2"',
    icon: 'ðŸš¾',
  },
  {
    id: 'urinal_3_4in_valve',
    name: 'Urinal (3/4" Flush Valve)',
    category: 'Toilets & Urinals',
    occupancy: 'public',
    supplyControl: '3/4" flush valve',
    wsfuCold: 5.0,
    wsfuHot: 0,
    wsfuTotal: 5.0,
    dfu: 4,
    hotWaterGPH: 0,
    trapSize: '2"',
    icon: 'ðŸš¾',
  },
  {
    id: 'urinal_tank',
    name: 'Urinal (Flush Tank)',
    category: 'Toilets & Urinals',
    occupancy: 'public',
    supplyControl: 'Flush tank',
    wsfuCold: 3.0,
    wsfuHot: 0,
    wsfuTotal: 3.0,
    dfu: 4,
    hotWaterGPH: 0,
    trapSize: '2"',
    icon: 'ðŸš¾',
  },
  {
    id: 'urinal_waterless',
    name: 'Urinal (Waterless)',
    category: 'Toilets & Urinals',
    occupancy: 'public',
    supplyControl: 'None',
    wsfuCold: 0,
    wsfuHot: 0,
    wsfuTotal: 0,
    dfu: 2,
    hotWaterGPH: 0,
    trapSize: '2"',
    icon: 'ðŸš¾',
  },
  {
    id: 'bidet',
    name: 'Bidet',
    category: 'Toilets & Urinals',
    occupancy: 'private',
    supplyControl: 'Faucet',
    wsfuCold: 1.5,
    wsfuHot: 1.5,
    wsfuTotal: 2.0,
    dfu: 1,
    hotWaterGPH: 2,
    trapSize: '1.5"',
    icon: 'ðŸš¿',
  },

  // ============================================
  // SINKS & LAVATORIES (ASPE Table 5-18)
  // ============================================
  {
    id: 'lavatory_private',
    name: 'Lavatory (Private)',
    category: 'Sinks & Lavatories',
    occupancy: 'private',
    supplyControl: 'Faucet',
    wsfuCold: 0.5,
    wsfuHot: 0.5,
    wsfuTotal: 0.7,
    dfu: 1,
    hotWaterGPH: 2,  // ASHRAE - private lavatory
    trapSize: '1.25"',
    icon: 'ðŸš°',
  },
  {
    id: 'lavatory_public',
    name: 'Lavatory (Public)',
    category: 'Sinks & Lavatories',
    occupancy: 'public',
    supplyControl: 'Faucet',
    wsfuCold: 1.5,
    wsfuHot: 1.5,
    wsfuTotal: 2.0,
    dfu: 1,
    hotWaterGPH: 6,  // ASHRAE - public lavatory
    trapSize: '1.25"',
    icon: 'ðŸš°',
  },
  {
    id: 'kitchen_sink_private',
    name: 'Kitchen Sink (Private)',
    category: 'Sinks & Lavatories',
    occupancy: 'private',
    supplyControl: 'Faucet',
    wsfuCold: 1.0,
    wsfuHot: 1.0,
    wsfuTotal: 1.4,
    dfu: 2,
    hotWaterGPH: 10,  // ASHRAE - residential kitchen
    trapSize: '1.5"',
    icon: 'ðŸ½ï¸',
  },
  {
    id: 'kitchen_sink_commercial',
    name: 'Kitchen Sink (Hotel/Restaurant)',
    category: 'Sinks & Lavatories',
    occupancy: 'public',
    supplyControl: 'Faucet',
    wsfuCold: 3.0,
    wsfuHot: 3.0,
    wsfuTotal: 4.0,
    dfu: 3,
    hotWaterGPH: 30,  // ASHRAE - commercial kitchen
    trapSize: '2"',
    icon: 'ðŸ½ï¸',
  },
  {
    id: 'service_sink',
    name: 'Service Sink / Mop Basin',
    category: 'Sinks & Lavatories',
    occupancy: 'public',
    supplyControl: 'Faucet',
    wsfuCold: 2.25,
    wsfuHot: 2.25,
    wsfuTotal: 3.0,
    dfu: 3,
    hotWaterGPH: 15,  // ASHRAE
    trapSize: '3"',
    icon: 'ðŸ§¹',
  },
  {
    id: 'laundry_tray',
    name: 'Laundry Tray (1-3 compartments)',
    category: 'Sinks & Lavatories',
    occupancy: 'private',
    supplyControl: 'Faucet',
    wsfuCold: 1.0,
    wsfuHot: 1.0,
    wsfuTotal: 1.4,
    dfu: 2,
    hotWaterGPH: 20,
    trapSize: '1.5"',
    icon: 'ðŸ§º',
  },
  {
    id: 'combination_fixture',
    name: 'Combination Fixture',
    category: 'Sinks & Lavatories',
    occupancy: 'private',
    supplyControl: 'Faucet',
    wsfuCold: 2.25,
    wsfuHot: 2.25,
    wsfuTotal: 3.0,
    dfu: 2,
    hotWaterGPH: 10,
    trapSize: '1.5"',
    icon: 'ðŸš¿',
  },
  {
    id: 'bar_sink',
    name: 'Bar Sink',
    category: 'Sinks & Lavatories',
    occupancy: 'public',
    supplyControl: 'Faucet',
    wsfuCold: 1.0,
    wsfuHot: 1.0,
    wsfuTotal: 1.4,
    dfu: 1,
    hotWaterGPH: 5,
    trapSize: '1.5"',
    icon: 'ðŸ¸',
  },
  {
    id: 'hand_sink',
    name: 'Hand Sink (Commercial)',
    category: 'Sinks & Lavatories',
    occupancy: 'public',
    supplyControl: 'Faucet',
    wsfuCold: 1.5,
    wsfuHot: 1.5,
    wsfuTotal: 2.0,
    dfu: 1,
    hotWaterGPH: 5,
    trapSize: '1.25"',
    icon: 'ðŸ¤²',
  },

  // ============================================
  // BATHING (ASPE Table 5-18)
  // ============================================
  {
    id: 'shower_private',
    name: 'Shower (Private)',
    category: 'Bathing',
    occupancy: 'private',
    supplyControl: 'Mixing valve',
    wsfuCold: 1.0,
    wsfuHot: 1.0,
    wsfuTotal: 1.4,
    dfu: 2,
    hotWaterGPH: 30,  // ASHRAE - private shower
    trapSize: '2"',
    icon: 'ðŸš¿',
  },
  {
    id: 'shower_public',
    name: 'Shower (Public/Gang)',
    category: 'Bathing',
    occupancy: 'public',
    supplyControl: 'Mixing valve',
    wsfuCold: 3.0,
    wsfuHot: 3.0,
    wsfuTotal: 4.0,
    dfu: 2,
    hotWaterGPH: 100,  // ASHRAE - gymnasium shower
    trapSize: '2"',
    icon: 'ðŸš¿',
  },
  {
    id: 'bathtub_private',
    name: 'Bathtub (Private)',
    category: 'Bathing',
    occupancy: 'private',
    supplyControl: 'Faucet',
    wsfuCold: 1.0,
    wsfuHot: 1.0,
    wsfuTotal: 1.4,
    dfu: 2,
    hotWaterGPH: 30,  // ASHRAE
    trapSize: '1.5"',
    icon: 'ðŸ›',
  },
  {
    id: 'bathtub_public',
    name: 'Bathtub (Public)',
    category: 'Bathing',
    occupancy: 'public',
    supplyControl: 'Faucet',
    wsfuCold: 3.0,
    wsfuHot: 3.0,
    wsfuTotal: 4.0,
    dfu: 2,
    hotWaterGPH: 50,
    trapSize: '1.5"',
    icon: 'ðŸ›',
  },
  {
    id: 'bathtub_whirlpool',
    name: 'Bathtub (Whirlpool)',
    category: 'Bathing',
    occupancy: 'private',
    supplyControl: 'Faucet',
    wsfuCold: 3.0,
    wsfuHot: 3.0,
    wsfuTotal: 4.0,
    dfu: 2,
    hotWaterGPH: 50,
    trapSize: '1.5"',
    icon: 'ðŸ›',
  },
  {
    id: 'soaking_tub',
    name: 'Soaking Tub (Large)',
    category: 'Bathing',
    occupancy: 'public',
    supplyControl: 'Faucet',
    wsfuCold: 4.0,
    wsfuHot: 4.0,
    wsfuTotal: 6.0,
    dfu: 3,
    hotWaterGPH: 80,
    trapSize: '2"',
    icon: 'ðŸ›',
  },
  {
    id: 'foot_bath',
    name: 'Foot Bath',
    category: 'Bathing',
    occupancy: 'public',
    supplyControl: 'Faucet',
    wsfuCold: 1.0,
    wsfuHot: 1.0,
    wsfuTotal: 1.4,
    dfu: 1,
    hotWaterGPH: 10,
    trapSize: '1.5"',
    icon: 'ðŸ¦¶',
  },

  // ============================================
  // APPLIANCES (ASPE Table 5-18)
  // ============================================
  {
    id: 'washing_machine_8lb_private',
    name: 'Washing Machine 8 lb (Private)',
    category: 'Appliances',
    occupancy: 'private',
    supplyControl: 'Automatic',
    wsfuCold: 1.0,
    wsfuHot: 1.0,
    wsfuTotal: 1.4,
    dfu: 3,
    hotWaterGPH: 30,
    trapSize: '2"',
    icon: 'ðŸ§º',
  },
  {
    id: 'washing_machine_8lb_public',
    name: 'Washing Machine 8 lb (Public)',
    category: 'Appliances',
    occupancy: 'public',
    supplyControl: 'Automatic',
    wsfuCold: 2.25,
    wsfuHot: 2.25,
    wsfuTotal: 3.0,
    dfu: 3,
    hotWaterGPH: 30,
    trapSize: '2"',
    icon: 'ðŸ§º',
  },
  {
    id: 'washing_machine_15lb',
    name: 'Washing Machine 15 lb (Public)',
    category: 'Appliances',
    occupancy: 'public',
    supplyControl: 'Automatic',
    wsfuCold: 3.0,
    wsfuHot: 3.0,
    wsfuTotal: 4.0,
    dfu: 4,
    hotWaterGPH: 45,
    trapSize: '2"',
    icon: 'ðŸ§º',
  },
  {
    id: 'washing_machine_commercial',
    name: 'Washing Machine (Commercial 50+ lb)',
    category: 'Appliances',
    occupancy: 'public',
    supplyControl: 'Automatic',
    wsfuCold: 6.0,
    wsfuHot: 6.0,
    wsfuTotal: 8.0,
    dfu: 6,
    hotWaterGPH: 60,
    trapSize: '3"',
    icon: 'ðŸ§º',
  },
  {
    id: 'dishwasher_private',
    name: 'Dishwasher (Private)',
    category: 'Appliances',
    occupancy: 'private',
    supplyControl: 'Automatic',
    wsfuCold: 0,
    wsfuHot: 1.4,
    wsfuTotal: 1.4,
    dfu: 2,
    hotWaterGPH: 15,
    trapSize: '1.5"',
    icon: 'ðŸ½ï¸',
  },
  {
    id: 'dishwasher_commercial',
    name: 'Dishwasher (Commercial)',
    category: 'Appliances',
    occupancy: 'public',
    supplyControl: 'Automatic',
    wsfuCold: 0,
    wsfuHot: 4.0,
    wsfuTotal: 4.0,
    dfu: 2,
    hotWaterGPH: 50,
    trapSize: '2"',
    icon: 'ðŸ½ï¸',
  },
  {
    id: 'ice_maker',
    name: 'Ice Maker',
    category: 'Appliances',
    occupancy: 'public',
    supplyControl: 'Automatic',
    wsfuCold: 1.0,
    wsfuHot: 0,
    wsfuTotal: 1.0,
    dfu: 1,
    hotWaterGPH: 0,
    trapSize: '1"',
    icon: 'ðŸ§Š',
  },
  {
    id: 'water_cooler',
    name: 'Water Cooler',
    category: 'Appliances',
    occupancy: 'public',
    supplyControl: 'Automatic',
    wsfuCold: 0.5,
    wsfuHot: 0,
    wsfuTotal: 0.5,
    dfu: 0.5,
    hotWaterGPH: 0,
    trapSize: '1"',
    icon: 'ðŸ’§',
  },
  {
    id: 'dryer_condensate',
    name: 'Dryer (Condensate Drain)',
    category: 'Appliances',
    occupancy: 'private',
    supplyControl: 'None',
    wsfuCold: 0,
    wsfuHot: 0,
    wsfuTotal: 0,
    dfu: 2,
    hotWaterGPH: 0,
    trapSize: '2"',
    icon: 'â™¨ï¸',
  },

  // ============================================
  // DRAINS
  // ============================================
  {
    id: 'floor_drain_2in',
    name: 'Floor Drain (2")',
    category: 'Drains',
    occupancy: 'public',
    supplyControl: 'None',
    wsfuCold: 0,
    wsfuHot: 0,
    wsfuTotal: 0,
    dfu: 2,
    hotWaterGPH: 0,
    trapSize: '2"',
    icon: 'ðŸ•³ï¸',
  },
  {
    id: 'floor_drain_3in',
    name: 'Floor Drain (3")',
    category: 'Drains',
    occupancy: 'public',
    supplyControl: 'None',
    wsfuCold: 0,
    wsfuHot: 0,
    wsfuTotal: 0,
    dfu: 3,
    hotWaterGPH: 0,
    trapSize: '3"',
    icon: 'ðŸ•³ï¸',
  },
  {
    id: 'floor_drain_4in',
    name: 'Floor Drain (4")',
    category: 'Drains',
    occupancy: 'public',
    supplyControl: 'None',
    wsfuCold: 0,
    wsfuHot: 0,
    wsfuTotal: 0,
    dfu: 4,
    hotWaterGPH: 0,
    trapSize: '4"',
    icon: 'ðŸ•³ï¸',
  },
  {
    id: 'trench_drain',
    name: 'Trench Drain (per 10 ft)',
    category: 'Drains',
    occupancy: 'public',
    supplyControl: 'None',
    wsfuCold: 0,
    wsfuHot: 0,
    wsfuTotal: 0,
    dfu: 3,
    hotWaterGPH: 0,
    trapSize: '3"',
    icon: 'ðŸ•³ï¸',
  },
  {
    id: 'area_drain',
    name: 'Area Drain',
    category: 'Drains',
    occupancy: 'public',
    supplyControl: 'None',
    wsfuCold: 0,
    wsfuHot: 0,
    wsfuTotal: 0,
    dfu: 2,
    hotWaterGPH: 0,
    trapSize: '3"',
    icon: 'ðŸ•³ï¸',
  },
  {
    id: 'emergency_floor_drain',
    name: 'Emergency Floor Drain',
    category: 'Drains',
    occupancy: 'public',
    supplyControl: 'None',
    wsfuCold: 0,
    wsfuHot: 0,
    wsfuTotal: 0,
    dfu: 0,
    hotWaterGPH: 0,
    trapSize: '2"',
    icon: 'ðŸš¨',
  },

  // ============================================
  // SPECIALTY
  // ============================================
  {
    id: 'drinking_fountain',
    name: 'Drinking Fountain',
    category: 'Specialty',
    occupancy: 'public',
    supplyControl: '3/8" valve',
    wsfuCold: 0.25,
    wsfuHot: 0,
    wsfuTotal: 0.25,
    dfu: 0.5,
    hotWaterGPH: 0,
    trapSize: '1.25"',
    icon: 'â›²',
  },
  {
    id: 'bottle_filler',
    name: 'Bottle Filler',
    category: 'Specialty',
    occupancy: 'public',
    supplyControl: '3/8" valve',
    wsfuCold: 0.25,
    wsfuHot: 0,
    wsfuTotal: 0.25,
    dfu: 0.5,
    hotWaterGPH: 0,
    trapSize: '1.25"',
    icon: 'ðŸ¶',
  },
  {
    id: 'hose_bibb',
    name: 'Hose Bibb',
    category: 'Specialty',
    occupancy: 'public',
    supplyControl: 'Valve',
    wsfuCold: 2.5,
    wsfuHot: 0,
    wsfuTotal: 2.5,
    dfu: 0,
    hotWaterGPH: 0,
    icon: 'ðŸš¿',
  },
  {
    id: 'pool_fill',
    name: 'Pool Fill Valve',
    category: 'Specialty',
    occupancy: 'public',
    supplyControl: 'Valve',
    wsfuCold: 4.0,
    wsfuHot: 0,
    wsfuTotal: 4.0,
    dfu: 0,
    hotWaterGPH: 0,
    icon: 'ðŸŠ',
  },
  {
    id: 'hot_tub_fill',
    name: 'Hot Tub Fill',
    category: 'Specialty',
    occupancy: 'public',
    supplyControl: 'Valve',
    wsfuCold: 2.0,
    wsfuHot: 2.0,
    wsfuTotal: 4.0,
    dfu: 2,
    hotWaterGPH: 0,
    icon: 'â™¨ï¸',
  },
  {
    id: 'eyewash_station',
    name: 'Eyewash Station',
    category: 'Specialty',
    occupancy: 'public',
    supplyControl: 'Valve',
    wsfuCold: 1.0,
    wsfuHot: 0,
    wsfuTotal: 1.0,
    dfu: 1,
    hotWaterGPH: 0,
    trapSize: '1.5"',
    icon: 'ðŸ‘ï¸',
  },
  {
    id: 'emergency_shower',
    name: 'Emergency Shower',
    category: 'Specialty',
    occupancy: 'public',
    supplyControl: 'Valve',
    wsfuCold: 4.0,
    wsfuHot: 0,
    wsfuTotal: 4.0,
    dfu: 2,
    hotWaterGPH: 0,
    trapSize: '2"',
    icon: 'ðŸš¨',
  },
  {
    id: 'dental_unit',
    name: 'Dental Unit (Cuspidor)',
    category: 'Specialty',
    occupancy: 'public',
    supplyControl: 'Valve',
    wsfuCold: 1.0,
    wsfuHot: 0,
    wsfuTotal: 1.0,
    dfu: 1,
    hotWaterGPH: 0,
    trapSize: '1.25"',
    icon: 'ðŸ¦·',
  },

  // ============================================
  // MEDICAL
  // ============================================
  {
    id: 'clinic_sink',
    name: 'Clinic Sink',
    category: 'Medical',
    occupancy: 'public',
    supplyControl: 'Faucet',
    wsfuCold: 2.25,
    wsfuHot: 2.25,
    wsfuTotal: 3.0,
    dfu: 3,
    hotWaterGPH: 15,
    trapSize: '1.5"',
    icon: 'ðŸ¥',
  },
  {
    id: 'bedpan_washer',
    name: 'Bedpan Washer',
    category: 'Medical',
    occupancy: 'public',
    supplyControl: 'Flush valve',
    wsfuCold: 5.0,
    wsfuHot: 5.0,
    wsfuTotal: 10.0,
    dfu: 6,
    hotWaterGPH: 30,
    trapSize: '3"',
    icon: 'ðŸ¥',
  },
  {
    id: 'flushing_rim_sink',
    name: 'Flushing Rim Sink',
    category: 'Medical',
    occupancy: 'public',
    supplyControl: 'Flush valve',
    wsfuCold: 6.0,
    wsfuHot: 6.0,
    wsfuTotal: 10.0,
    dfu: 6,
    hotWaterGPH: 20,
    trapSize: '3"',
    icon: 'ðŸ¥',
  },
  {
    id: 'sterilizer',
    name: 'Sterilizer',
    category: 'Medical',
    occupancy: 'public',
    supplyControl: 'Automatic',
    wsfuCold: 2.0,
    wsfuHot: 2.0,
    wsfuTotal: 4.0,
    dfu: 2,
    hotWaterGPH: 10,
    trapSize: '1.5"',
    icon: 'ðŸ¥',
  },

  // ============================================
  // COMMERCIAL KITCHEN
  // ============================================
  {
    id: 'pot_sink_3comp',
    name: 'Pot Sink (3-Compartment)',
    category: 'Commercial Kitchen',
    occupancy: 'public',
    supplyControl: 'Faucet',
    wsfuCold: 4.0,
    wsfuHot: 4.0,
    wsfuTotal: 6.0,
    dfu: 4,
    hotWaterGPH: 50,
    trapSize: '2"',
    icon: 'ðŸ³',
  },
  {
    id: 'prep_sink',
    name: 'Prep Sink',
    category: 'Commercial Kitchen',
    occupancy: 'public',
    supplyControl: 'Faucet',
    wsfuCold: 2.0,
    wsfuHot: 2.0,
    wsfuTotal: 3.0,
    dfu: 2,
    hotWaterGPH: 20,
    trapSize: '1.5"',
    icon: 'ðŸ¥—',
  },
  {
    id: 'food_waste_disposer',
    name: 'Food Waste Disposer',
    category: 'Commercial Kitchen',
    occupancy: 'public',
    supplyControl: 'Faucet',
    wsfuCold: 2.0,
    wsfuHot: 0,
    wsfuTotal: 2.0,
    dfu: 2,
    hotWaterGPH: 0,
    trapSize: '1.5"',
    icon: 'ðŸ—‘ï¸',
  },
  {
    id: 'grease_interceptor',
    name: 'Grease Interceptor Connection',
    category: 'Commercial Kitchen',
    occupancy: 'public',
    supplyControl: 'None',
    wsfuCold: 0,
    wsfuHot: 0,
    wsfuTotal: 0,
    dfu: 4,
    hotWaterGPH: 0,
    trapSize: '4"',
    icon: 'ðŸ›¢ï¸',
  },
  {
    id: 'pre_rinse_spray',
    name: 'Pre-Rinse Spray Valve',
    category: 'Commercial Kitchen',
    occupancy: 'public',
    supplyControl: 'Valve',
    wsfuCold: 3.0,
    wsfuHot: 3.0,
    wsfuTotal: 4.0,
    dfu: 0,
    hotWaterGPH: 40,
    icon: 'ðŸ’¦',
  },
]

// Helper function to get fixture by ID
// Also checks LEGACY_FIXTURE_MAPPING for backwards compatibility
export function getFixtureById(id: string): FixtureDefinition | undefined {
  // First try direct lookup
  let fixture = NYC_FIXTURE_DATABASE.find(f => f.id === id)
  if (fixture) return fixture
  
  // Try mapping from legacy ID
  const mappedId = LEGACY_FIXTURE_MAPPING[id]
  if (mappedId) {
    fixture = NYC_FIXTURE_DATABASE.find(f => f.id === mappedId)
  }
  
  return fixture
}

// Helper function to get fixtures by category
export function getFixturesByCategory(category: FixtureCategory): FixtureDefinition[] {
  return NYC_FIXTURE_DATABASE.filter(f => f.category === category)
}

// Legacy fixture ID mapping (old -> new)
// Maps legacy IDs and simplified IDs to the appropriate ASPE fixture
export const LEGACY_FIXTURE_MAPPING: Record<string, string> = {
  // Old aggregate keys to new ASPE-based IDs
  'showers': 'shower_public',
  'lavs': 'lavatory_public',
  'wcs': 'water_closet_tank_private',
  'floorDrains': 'floor_drain_2in',
  'serviceSinks': 'service_sink',
  'washingMachines': 'washing_machine_8lb_public',
  'dryers': 'dryer_condensate',
  
  // Simplified IDs used in zoneDefaults -> new ASPE IDs
  'shower': 'shower_public',
  'lavatory': 'lavatory_public',
  'water_closet_tank': 'water_closet_tank_private',
  'water_closet_valve': 'water_closet_valve_private',
  'urinal_flush_valve': 'urinal_3_4in_valve',
  'urinal_flush_tank': 'urinal_tank',
  'washing_machine_residential': 'washing_machine_8lb_private',
  'hand_sink': 'hand_sink',
  'pot_sink_3comp': 'pot_sink_3comp',
  'prep_sink': 'prep_sink',
  'dishwasher_commercial': 'dishwasher_commercial',
  'grease_interceptor': 'grease_interceptor',
}

// Reverse mapping for display purposes (ASPE ID -> legacy aggregate key)
export const NEW_TO_LEGACY_MAPPING: Record<string, string> = {
  'shower_private': 'showers',
  'shower_public': 'showers',
  'lavatory_private': 'lavs',
  'lavatory_public': 'lavs',
  'water_closet_tank_private': 'wcs',
  'water_closet_valve_private': 'wcs',
  'water_closet_valve_public': 'wcs',
  'water_closet_tank_public': 'wcs',
  'water_closet_flushometer': 'wcs',
  'urinal_1in_valve': 'wcs',
  'urinal_3_4in_valve': 'wcs',
  'urinal_tank': 'wcs',
  'urinal_waterless': 'wcs',
  'floor_drain_2in': 'floorDrains',
  'floor_drain_3in': 'floorDrains',
  'floor_drain_4in': 'floorDrains',
  'area_drain': 'floorDrains',
  'trench_drain': 'floorDrains',
  'service_sink': 'serviceSinks',
  'washing_machine_8lb_private': 'washingMachines',
  'washing_machine_8lb_public': 'washingMachines',
  'washing_machine_15lb': 'washingMachines',
  'washing_machine_commercial': 'washingMachines',
  'dryer_condensate': 'dryers',
}
